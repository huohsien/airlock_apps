<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta name="viewport" content="width=device-width" />
    <title> Test JS API </title>


    <script src="js/testData.js"></script>

    <script type="text/javascript">

        airlock.onReady("handleAirlockReady()");

        function handleAirlockReady() {

            var value = BarCodeGetReaderType();
            document.getElementById("reader_type").textContent = `Reader Type: ${value}`;
            value = BarCodeGetReaderServiceVersion();
            document.getElementById("service_version").textContent = `Service Version: ${value}`;

            // Test: BarCodeGetDecodersStatus()
            // var result = "<h2>Test: BarCodeGetDecodersStatus()</h2> <hr>";
            // try {
            //     var decoderStatusPromise = BarCodeGetDecodersStatus();

            //     decoderStatusPromise.then((decoders) => {
            //         var decoderProperties = Object.keys(decoders); // if comment it out, then will test decoders against predefined propterty in testData.js file
            //         decoderProperties.forEach(propertyName => {
            //             result = `${result}\n <p>${propertyName}</p> <p>${decoders[propertyName]}</p>`;
            //         });
            //         document.getElementById("result").innerHTML = result;

            //     });

            // } catch (error) {
            //     document.getElementById("result").textContent = `error: ${error}`;
            // }

            // Test: BarCodeGetReaderOutputConfiguration()
            var result2 = "<h2>Test: BarCodeGetReaderOutputConfiguration()</h2> <hr>";
            try {
                var readerOutputConfig = BarCodeGetReaderOutputConfiguration();
                // document.getElementById("result2").textContent = JSON.stringify(readerOutputConfig);

                var readerOutputConfigProperties = Object.keys(readerOutputConfig); // if comment it out, then will test decoders against predefined propterty in testData.js file

                readerOutputConfigProperties.forEach(propertyName => {
                    result2 = `${result2}\n <p>${propertyName}</p> <p>${readerOutputConfig[propertyName]}</p>`;
                });
                document.getElementById("result2").innerHTML = result2;

            } catch (error) {
                document.getElementById("result2").textContent = `error: ${error}`;
            }
        }
    </script>
</head>

<body>
    <h2 id = "reader_type">Unknown</h2>
    <hr>
    <h2 id = "service_version">Unknown</h2>
    <hr>
    <!-- <div id="result">Unknown</div> -->
    <!-- <hr> -->
    <div id = "result2">Unknown</div>
</body>

</html>